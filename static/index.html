<!doctype html>
<html lang="vi">
<head>
    <title>Simple Uploader - Giống Catbox</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: #f0f0f0; margin: 0; padding: 20px; }
        h1 { color: #333; }
        .dropzone { border: 2px dashed #ccc; padding: 50px; margin: 20px auto; width: 400px; cursor: pointer; border-radius: 10px; }
        .dropzone:hover { border-color: #aaa; background: #e9e9e9; }
        #result { margin-top: 20px; color: green; font-weight: bold; word-wrap: break-word; }
        #error { color: red; }
    </style>
</head>
<body>
    <h1>Upload File Nhanh Chóng</h1>
    <p>Kéo thả file vào đây hoặc click để chọn (hỗ trợ hình, video, file bất kỳ).</p>
    <div class="dropzone" id="dropzone">
        Chọn file
        <input type="file" id="fileInput" style="display: none;">
    </div>
    <div id="result"></div>
    <div id="error"></div>

    <script>
        const dropzone = document.getElementById('dropzone');
        const fileInput = document.getElementById('fileInput');
        const result = document.getElementById('result');
        const errorDiv = document.getElementById('error');

        dropzone.addEventListener('click', () => fileInput.click());
        dropzone.addEventListener('dragover', (e) => { e.preventDefault(); dropzone.style.borderColor = '#000'; });
        dropzone.addEventListener('dragleave', () => dropzone.style.borderColor = '#ccc');
        dropzone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropzone.style.borderColor = '#ccc';
            fileInput.files = e.dataTransfer.files;
            uploadFile();
        });
        fileInput.addEventListener('change', uploadFile);

        function uploadFile() {
            if (fileInput.files.length === 0) return;
            result.innerHTML = 'Đang upload...';
            errorDiv.innerHTML = '';
            const formData = new FormData();
            formData.append('file', fileInput.files[0]);
            fetch('/upload', { method: 'POST', body: formData })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        result.innerHTML = `Upload thành công! Link: <a href="${data.url}" target="_blank">${data.url}</a>`;
                    } else {
                        errorDiv.innerHTML = data.error || 'Lỗi upload.';
                        result.innerHTML = '';
                    }
                })
                .catch(err => {
                    errorDiv.innerHTML = 'Lỗi: ' + err.message;
                    result.innerHTML = '';
                });
        }
    </script>
</body>
</html>
